{% extends "base.html" %} {% block title %}Detalhes do Pedido {{
pedido.numero_pedido }} - Gerenciador de Pedidos{% endblock %} {% block content
%}
<div class="row mb-4">
  <div class="col-12">
    <div class="d-flex justify-content-between align-items-center">
      <h1 class="h3">
        <i class="fas fa-file-alt me-2"></i>
        Detalhes do Pedido {{ pedido.numero_pedido }}
      </h1>
      <div class="btn-group">
        <a
          href="{{ url_for('pedidos_importados') }}"
          class="btn btn-outline-secondary"
        >
          <i class="fas fa-arrow-left me-1"></i>Voltar
        </a>
        <a href="{{ url_for('importar_csv') }}" class="btn btn-primary">
          <i class="fas fa-upload me-1"></i>Importar CSV
        </a>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <!-- Informações do Pedido -->
  <div class="col-md-6 mb-4">
    <div class="card h-100">
      <div class="card-header">
        <h5 class="mb-0">
          <i class="fas fa-shopping-cart me-2"></i>
          Informações do Pedido
        </h5>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-6">
            <p><strong>Número:</strong><br />{{ pedido.numero_pedido }}</p>
            <p><strong>Data:</strong><br />{{ pedido.data_pedido }}</p>
            <p>
              <strong>Status:</strong><br />
              {% if pedido.status_pedido == 'Aprovado' %}
              <span class="badge bg-success">{{ pedido.status_pedido }}</span>
              {% elif pedido.status_pedido == 'Pendente' %}
              <span class="badge bg-warning">{{ pedido.status_pedido }}</span>
              {% elif pedido.status_pedido == 'Cancelado' %}
              <span class="badge bg-danger">{{ pedido.status_pedido }}</span>
              {% else %}
              <span class="badge bg-secondary">{{ pedido.status_pedido }}</span>
              {% endif %}
            </p>
            <p>
              <strong>Pagamento:</strong><br />{{ pedido.status_pagamento }}
            </p>
            <p><strong>Envio:</strong><br />{{ pedido.status_envio }}</p>
          </div>
          <div class="col-6">
            <p><strong>Moeda:</strong><br />{{ pedido.moeda }}</p>
            <p>
              <strong>Subtotal:</strong><br />R$ {{
              "%.2f"|format(pedido.subtotal) }}
            </p>
            <p>
              <strong>Desconto:</strong><br />R$ {{
              "%.2f"|format(pedido.desconto) }}
            </p>
            <p>
              <strong>Frete:</strong><br />R$ {{
              "%.2f"|format(pedido.valor_frete) }}
            </p>
            <p>
              <strong>Total:</strong><br /><strong
                >R$ {{ "%.2f"|format(pedido.total) }}</strong
              >
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Informações do Cliente -->
  <div class="col-md-6 mb-4">
    <div class="card h-100">
      <div class="card-header">
        <h5 class="mb-0">
          <i class="fas fa-user me-2"></i>
          Informações do Cliente
        </h5>
      </div>
      <div class="card-body">
        <p><strong>Nome:</strong><br />{{ pedido.nome_comprador }}</p>
        <p><strong>E-mail:</strong><br />{{ pedido.email }}</p>
        <p><strong>CPF/CNPJ:</strong><br />{{ pedido.cpf_cnpj }}</p>
        <p><strong>Telefone:</strong><br />{{ pedido.telefone }}</p>
        <p>
          <strong>Forma de Pagamento:</strong><br />{{ pedido.forma_pagamento }}
        </p>
        {% if pedido.cupom_desconto %}
        <p><strong>Cupom:</strong><br />{{ pedido.cupom_desconto }}</p>
        {% endif %}
      </div>
    </div>
  </div>

  <!-- Endereço de Entrega -->
  <div class="col-md-6 mb-4">
    <div class="card h-100">
      <div class="card-header">
        <h5 class="mb-0">
          <i class="fas fa-map-marker-alt me-2"></i>
          Endereço de Entrega
        </h5>
      </div>
      <div class="card-body">
        <p>
          <strong>Nome para entrega:</strong><br />{{ pedido.nome_entrega }}
        </p>
        <p>
          <strong>Telefone para entrega:</strong><br />{{
          pedido.telefone_entrega }}
        </p>
        <p>
          <strong>Endereço:</strong><br />
          {{ pedido.endereco }}, {{ pedido.numero }} {% if pedido.complemento
          %}<br />{{ pedido.complemento }}{% endif %}
        </p>
        <p><strong>Bairro:</strong><br />{{ pedido.bairro }}</p>
        <p>
          <strong>Cidade:</strong><br />{{ pedido.cidade }} - {{ pedido.estado
          }}
        </p>
        <p><strong>CEP:</strong><br />{{ pedido.codigo_postal }}</p>
        <p><strong>País:</strong><br />{{ pedido.pais }}</p>
        <p>
          <strong>Forma de Entrega:</strong><br />
          {% if 'expresso' in pedido.forma_entrega.lower() %}
          <span class="badge bg-warning">
            <i class="fas fa-shipping-fast me-1"></i>{{ pedido.forma_entrega }}
          </span>
          {% else %}
          <span class="badge bg-primary">
            <i class="fas fa-shipping-fast me-1"></i>{{ pedido.forma_entrega }}
          </span>
          {% endif %}
        </p>
      </div>
    </div>
  </div>

  <!-- Produto e Anotações -->
  <div class="col-md-6 mb-4">
    <div class="card h-100">
      <div class="card-header">
        <h5 class="mb-0">
          <i class="fas fa-tshirt me-2"></i>
          Produto e Anotações
        </h5>
      </div>
      <div class="card-body">
        <p><strong>Produto:</strong><br />{{ pedido.nome_produto }}</p>
        <p>
          <strong>Valor do Produto:</strong><br />R$ {{
          "%.2f"|format(pedido.valor_produto) }}
        </p>

        {% if pedido.data_pagamento %}
        <p>
          <strong>Data de Pagamento:</strong><br />{{ pedido.data_pagamento }}
        </p>
        {% endif %} {% if pedido.data_envio %}
        <p><strong>Data de Envio:</strong><br />{{ pedido.data_envio }}</p>
        {% endif %} {% if pedido.anotacoes_comprador %}
        <p>
          <strong>Anotações do Comprador:</strong><br />
          <span class="text-muted">{{ pedido.anotacoes_comprador }}</span>
        </p>
        {% endif %} {% if pedido.anotacoes_vendedor %}
        <p>
          <strong>Anotações do Vendedor:</strong><br />
          <span class="text-muted">{{ pedido.anotacoes_vendedor }}</span>
        </p>
        {% endif %}
      </div>
    </div>
  </div>
</div>

<!-- Informações de Importação -->
<div class="row">
  <div class="col-12">
    <div class="card">
      <div class="card-header">
        <h6 class="mb-0">
          <i class="fas fa-info-circle me-2"></i>
          Informações de Importação
        </h6>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-md-6">
            <p>
              <strong>Data de Importação:</strong><br />{{
              pedido.data_importacao }}
            </p>
          </div>
          <div class="col-md-6">
            <p><strong>ID Interno:</strong><br />{{ pedido.id }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
