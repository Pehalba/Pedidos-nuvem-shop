{% extends "base.html" %} {% block title %}Pedidos Importados - Gerenciador de
Pedidos{% endblock %} {% block content %}
<div class="row mb-4">
  <div class="col-12">
    <div class="d-flex justify-content-between align-items-center">
      <h1 class="h3">
        <i class="fas fa-list me-2"></i>
        Pedidos Importados do CSV
      </h1>
      <a href="{{ url_for('importar_csv') }}" class="btn btn-primary">
        <i class="fas fa-upload me-1"></i>Importar Novo CSV
      </a>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-12">
    <div class="card">
      <div class="card-header">
        <h5 class="mb-0">
          <i class="fas fa-table me-2"></i>
          Lista de Pedidos ({{ pedidos|length }})
        </h5>
      </div>
      <div class="card-body">
        {% if pedidos %}
        <div class="table-responsive">
          <table class="table table-striped table-hover">
            <thead class="table-dark">
              <tr>
                <th>Número</th>
                <th>Cliente</th>
                <th>Produto</th>
                <th>Data</th>
                <th>Status</th>
                <th>Total</th>
                <th>Forma Entrega</th>
                <th>Ações</th>
              </tr>
            </thead>
            <tbody>
              {% for pedido in pedidos %}
              <tr>
                <td>
                  <strong>{{ pedido.numero_pedido }}</strong>
                </td>
                <td>
                  <div>{{ pedido.nome_comprador }}</div>
                  <small class="text-muted">{{ pedido.email }}</small>
                </td>
                <td>
                  <div>{{ pedido.nome_produto }}</div>
                  <small class="text-muted"
                    >R$ {{ "%.2f"|format(pedido.valor_produto) }}</small
                  >
                </td>
                <td>
                  <div>{{ pedido.data_pedido }}</div>
                  <small class="text-muted"
                    >{{ pedido.data_importacao[:10] }}</small
                  >
                </td>
                <td>
                  {% if pedido.status_pedido == 'Aprovado' %}
                  <span class="badge bg-success"
                    >{{ pedido.status_pedido }}</span
                  >
                  {% elif pedido.status_pedido == 'Pendente' %}
                  <span class="badge bg-warning"
                    >{{ pedido.status_pedido }}</span
                  >
                  {% elif pedido.status_pedido == 'Cancelado' %}
                  <span class="badge bg-danger"
                    >{{ pedido.status_pedido }}</span
                  >
                  {% else %}
                  <span class="badge bg-secondary"
                    >{{ pedido.status_pedido }}</span
                  >
                  {% endif %}
                </td>
                <td>
                  <strong>R$ {{ "%.2f"|format(pedido.total) }}</strong>
                </td>
                <td>
                  {% if 'expresso' in pedido.forma_entrega.lower() %}
                  <span class="badge bg-warning">
                    <i class="fas fa-shipping-fast me-1"></i>EXPRESSO
                  </span>
                  {% else %}
                  <span class="badge bg-primary">
                    <i class="fas fa-shipping-fast me-1"></i>PADRÃO
                  </span>
                  {% endif %}
                </td>
                <td>
                  <div class="btn-group btn-group-sm">
                    <a
                      href="{{ url_for('detalhes_pedido', pedido_id=pedido.numero_pedido) }}"
                      class="btn btn-outline-primary"
                      title="Ver Detalhes"
                    >
                      <i class="fas fa-eye"></i>
                    </a>
                    <a
                      href="{{ url_for('excluir_pedido_importado', pedido_id=pedido.numero_pedido) }}"
                      class="btn btn-outline-danger"
                      title="Excluir Pedido"
                      onclick="return confirm('Tem certeza que deseja excluir este pedido?')"
                    >
                      <i class="fas fa-trash"></i>
                    </a>
                  </div>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        {% else %}
        <div class="text-center py-4">
          <i class="fas fa-inbox fa-3x text-muted mb-3"></i>
          <h5 class="text-muted">Nenhum pedido importado</h5>
          <p class="text-muted">
            Importe um arquivo CSV para ver os pedidos aqui.
          </p>
          <a href="{{ url_for('importar_csv') }}" class="btn btn-primary">
            <i class="fas fa-upload me-1"></i>Importar CSV
          </a>
        </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>

<div class="row mt-4">
  <div class="col-12">
    <div class="card">
      <div class="card-header">
        <h6 class="mb-0">
          <i class="fas fa-info-circle me-2"></i>
          Informações sobre Importação
        </h6>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-md-6">
            <h6>Dados Armazenados:</h6>
            <ul>
              <li>Informações completas do pedido</li>
              <li>Dados do cliente e entrega</li>
              <li>Valores e status de pagamento</li>
              <li>Anotações e observações</li>
            </ul>
          </div>
          <div class="col-md-6">
            <h6>Funcionalidades:</h6>
            <ul>
              <li>Visualização detalhada de cada pedido</li>
              <li>Integração com sistema de grupos</li>
              <li>Exportação para backup</li>
              <li>Busca e filtros</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
